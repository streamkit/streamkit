(function(){var d;d=this;window.namespace=function(a){var b,c,f,e,g;b=function(b,c){return b[c]=b[c]||{}};c=a.split(".");a=d;typeof exports!=="undefined"&&c.shift();for(e=0,g=c.length;e<g;e++)f=c[e],a=b(a,f);return null}}).call(this);
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}};namespace("iList");iList.InfiniteList=function(){function a(b){this.appendNewElements=d(this.appendNewElements,this);this.dataProvider_dataLoadedHandler=d(this.dataProvider_dataLoadedHandler,this);this.dataProvider_loadingDataHandler=d(this.dataProvider_loadingDataHandler,this);this.container=b.container;this.itemRendererTemplate=b.itemRendererTemplate;this.templateFunction=b.templateFunction;this.loaderTemplate=b.loaderTemplate;
this.loaderSelector=b.loaderSelector;this.dataProvider=b.dataProvider;this.throwIfDataProviderIsNull();this.throwIfContainerIsNull();this.throwIfNoItemRenderer();this.initialize()}a.prototype.container=null;a.prototype.itemRendererTemplate=null;a.prototype.templateFunction=null;a.prototype.loaderSelector=null;a.prototype.dataProvider=null;a.prototype._jqLoader=null;a.prototype.throwIfDataProviderIsNull=function(){if(!this.dataProvider)throw Error("You must provide a dataProvider");};a.prototype.throwIfContainerIsNull=
function(){if(!this.container)throw Error("You must provide a valid container");};a.prototype.throwIfNoItemRenderer=function(){if(this.itemRendererTemplate&&!this.templateFunction)throw Error("You must provide a templateFunction when providing itemRendererTemplate");};a.prototype.initialize=function(){if(!(this.container instanceof $))this.container=$(this.container);$(this.dataProvider).on("loadingData",this.dataProvider_loadingDataHandler);$(this.dataProvider).on("dataLoaded",this.dataProvider_dataLoadedHandler);
return this._jqLoader=this.initLoader()};a.prototype.initLoader=function(){if(this.loaderSelector)return $(this.loaderSelector)};a.prototype.loadMore=function(){return this.dataProvider.loadMore()};a.prototype.dataProvider_loadingDataHandler=function(){if(this._jqLoader)return this._jqLoader.removeClass("loaded"),this._jqLoader.addClass("loading")};a.prototype.dataProvider_dataLoadedHandler=function(b,c){this._jqLoader&&(this._jqLoader.removeClass("loading"),this._jqLoader.addClass("loaded"),c.length===
0&&this._jqLoader.addClass("end"));return this.appendNewElements(c)};a.prototype.appendNewElements=function(b){var c;return(c=this.dataProvider.dataType)==="json"||c==="jsonp"||c==="xml"?this.appendArrayElements(b):this.appendHTMLElements(b)};a.prototype.appendArrayElements=function(b){var c,a,e,d;d=[];for(a=0,e=b.length;a<e;a++)c=b[a],d.push(this.createNewItem(c));b=d.join("");return this._jqLoader?this._jqLoader.before(b):this.container.append(b)};a.prototype.createNewItem=function(b){return this.templateFunction(this.itemRendererTemplate,
b)};a.prototype.appendHTMLElements=function(b){var c,a,e,d;if(this._jqLoader){d=[];for(a=0,e=b.length;a<e;a++)c=b[a],d.push(this._jqLoader.before(c))}else{d=[];for(a=0,e=b.length;a<e;a++)c=b[a],d.push(this.container.append(c))}return d};return a}()}).call(this);
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}};namespace("iList");iList.LazyDataProvider=function(){function a(b){this.loader_resultHandler=d(this.loader_resultHandler,this);this.loadPolicy_loadHandler=d(this.loadPolicy_loadHandler,this);this.appendResult=d(this.appendResult,this);this.source=b.source;this.loadPolicy=b.loadPolicy;this.dataConverter=b.dataConverter;if(b.dataType)this.dataType=b.dataType;this.initialize();this.setLoader(b.loader)}a.prototype.source=
null;a.prototype.dataType="json";a.prototype.loadPolicy=null;a.prototype._loader=null;a.prototype.dataConverter=null;a.prototype.gotEmptyResults=false;a.prototype.isLoading=false;a.prototype.initialize=function(){this.setSourceIfEmpty();return $(this.loadPolicy).on("load",this.loadPolicy_loadHandler)};a.prototype.setSourceIfEmpty=function(){var b;return(b=this.source)!=null?b:this.source=[]};a.prototype.getSource=function(){return this.source};a.prototype.getLoadPolicy=function(){return this.loadPolicy};
a.prototype.getLoader=function(){return this._loader};a.prototype.setLoader=function(b){this._loader&&$(this._loader).off("result",this.loader_resultHandler);this._loader=b;this.throwIfNullLoader();return $(this._loader).on("result",this.loader_resultHandler)};a.prototype.throwIfNullLoader=function(){if(!this._loader)throw Error("You have to provide a non-null loader");};a.prototype.reset=function(){this.source=[];return this.gotEmptyResults=false};a.prototype.loadMore=function(){if(!this.isLoading&&
(this.isLoading=true,!this.gotEmptyResults))return this._loader.loadMore()};a.prototype.appendResult=function(b){this.gotEmptyResults=b.length===0;if($.isArray(b)&&$.isArray(this.source))return this.source=this.source.concat(b)};a.prototype.loadPolicy_loadHandler=function(){if(!this.gotEmptyResults)return $(this).trigger("loadingData"),this.loadMore()};a.prototype.loader_resultHandler=function(b,a){this.isLoading=false;return this.processResult(a)};a.prototype.processResult=function(b){b=this.getConvertedData(b);
this.appendResult(b);return this.triggerLoadedEvent(b)};a.prototype.getConvertedData=function(b){return(typeof this.dataConverter==="function"?this.dataConverter(b):void 0)||b};a.prototype.triggerLoadedEvent=function(b){return $(this).trigger("dataLoaded",[b])};return a}()}).call(this);
(function(){var d=Object.prototype.hasOwnProperty,a=function(b,a){function f(){this.constructor=b}for(var e in a)d.call(a,e)&&(b[e]=a[e]);f.prototype=a.prototype;b.prototype=new f;b.__super__=a.prototype;return b};namespace("iList");iList.LazyDataProviderHTML=function(b){function c(a){c.__super__.constructor.call(this,a);this.itemSelector=a.itemSelector;this.throwIfNoItemSelector()}a(c,b);c.prototype.itemSelector=null;c.prototype.throwIfNoItemSelector=function(){if(!this.itemSelector)throw Error("You must set an itemSelector");
};c.prototype.getConvertedData=function(a){var b,a=c.__super__.getConvertedData.call(this,a);b=$(a).find(this.itemSelector);var d,i,h;h=[];for(d=0,i=b.length;d<i;d++)a=b[d],h.push(a);return h};return c}(iList.LazyDataProvider)}).call(this);
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}};namespace("iList.loader");iList.loader.AjaxBaseLoader=function(){function a(a){this._clearHandlers=d(this._clearHandlers,this);this._failHandler=d(this._failHandler,this);this._doneHandler=d(this._doneHandler,this);this.url=a.url}a.prototype.url=null;a.prototype._xhr=null;a.prototype.getNextUrl=function(){return""+this.url};a.prototype.getXhr=function(){return $.get(this.getNextUrl())};a.prototype.loadMore=function(){this._xhr&&
(this._clearHandlers(),this._xhr.abort());this._xhr=this.getXhr();this._xhr.done(this._doneHandler);return this._xhr.fail(this._failHandler)};a.prototype.processResult=function(){return null};a.prototype._doneHandler=function(a,c,f){this.processResult(a);$(this).trigger("result",[a,c,f]);return this._clearHandlers()};a.prototype._failHandler=function(a,c,f){$(this).trigger("fault",[a,c,f]);return this._clearHandlers()};a.prototype._clearHandlers=function(){return $(this._xhr).off()};return a}()}).call(this);
(function(){var d=Object.prototype.hasOwnProperty,a=function(a,c){function f(){this.constructor=a}for(var e in c)d.call(c,e)&&(a[e]=c[e]);f.prototype=c.prototype;a.prototype=new f;a.__super__=c.prototype;return a};namespace("iList.loader");iList.loader.AjaxDataLoader=function(b){function c(a){c.__super__.constructor.call(this,a);this.rows=a.rows;this.offset=a.offset}a(c,b);c.prototype.rows=30;c.prototype.offset=0;c.prototype.getNextUrl=function(){return this.url.indexOf("?")<0?""+this.url+"?rows="+
this.rows+"&offset="+this.offset:""+this.url+"&rows="+this.rows+"&offset="+this.offset};c.prototype.processResult=function(){return this.offset+=this.rows};return c}(iList.loader.AjaxBaseLoader)}).call(this);
(function(){var d=Object.prototype.hasOwnProperty,a=function(a,c){function f(){this.constructor=a}for(var e in c)d.call(c,e)&&(a[e]=c[e]);f.prototype=c.prototype;a.prototype=new f;a.__super__=c.prototype;return a};namespace("iList.loader");iList.loader.AjaxPageLoader=function(b){function c(a){c.__super__.constructor.call(this,a);if(a.page)this.page=a.page}a(c,b);c.prototype.page=1;c.prototype.getNextUrl=function(){return""+this.url+"/"+this.page};c.prototype.processResult=function(){return this.page+=
1};return c}(iList.loader.AjaxBaseLoader)}).call(this);(function(){namespace("iList.loadPolicy");iList.loadPolicy.AbstractLoadPolicy=function(){function d(){}d.prototype.triggerLoadEvent=function(a){return $(this).trigger("load",a)};return d}()}).call(this);
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}},a=Object.prototype.hasOwnProperty,b=function(b,d){function e(){this.constructor=b}for(var g in d)a.call(d,g)&&(b[g]=d[g]);e.prototype=d.prototype;b.prototype=new e;b.__super__=d.prototype;return b};namespace("iList.loadPolicy");iList.loadPolicy.ManualLoadPolicy=function(a){function f(a){this.doLoad=d(this.doLoad,this);this.initialize=d(this.initialize,this);this.initialize(a)}b(f,a);f.prototype.loaderEl=null;f.prototype.initialize=
function(a){if(a)return this.loaderEl=$(a),this.loaderEl.on("click",this.doLoad)};f.prototype.doLoad=function(){return this.triggerLoadEvent("manual")};return f}(iList.loadPolicy.AbstractLoadPolicy)}).call(this);
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}},a=Object.prototype.hasOwnProperty,b=function(b,d){function e(){this.constructor=b}for(var g in d)a.call(d,g)&&(b[g]=d[g]);e.prototype=d.prototype;b.prototype=new e;b.__super__=d.prototype;return b};namespace("iList.loadPolicy");iList.loadPolicy.WindowScroll=function(a){function f(a){this.window_scrollHandler=d(this.window_scrollHandler,this);this.offset=a||this.offset;this.initialize()}b(f,a);f.prototype.offset=0;f.prototype.initialize=
function(){return $(window).scroll(this.window_scrollHandler)};f.prototype.window_scrollHandler=function(){var a,b;b=$(window).scrollTop()+$(window).height();a=$(document).height()-this.offset;if(b>=a)return this.triggerLoadEvent("window_scroll")};return f}(iList.loadPolicy.AbstractLoadPolicy)}).call(this);